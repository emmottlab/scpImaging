% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/imageAnalysis.R
\name{countCells}
\alias{countCells}
\title{'countCells()' Count Segmented Objects in Cellpose PNG Masks}
\usage{
countCells(
  path = NULL,
  files = NULL,
  suffix = "_masks.png",
  background_value = 0
)
}
\arguments{
\item{path}{A character string specifying the path to either a single PNG mask
file or a directory containing multiple PNG mask files. Default is \code{NULL}.}

\item{files}{A character vector of full paths to specific PNG mask files. If
provided, this overrides the \code{path} and \code{suffix} arguments. Default is \code{NULL}.}

\item{suffix}{A character string representing the filename suffix used to
identify mask files when \code{path} points to a directory and \code{files} is \code{NULL}.
Default is \code{"_masks.png"}. The pattern matching looks for files ending with
this suffix.}

\item{background_value}{A single numeric value representing the pixel value
assigned to the background in the masks. This value will be excluded from
the object count. Default is \code{0}.}
}
\value{
A dataframe with two columns:
\itemize{
\item \code{FileName}: The base name of the processed PNG file.
\item \code{CP_CellCount}: The integer count of unique objects (masks) found
in the file, excluding the background value. Returns \code{NA} if the file
could not be processed due to errors.
}
}
\description{
This function processes Cellpose-generated PNG segmentation masks to count the
number of unique objects (e.g., cells, nuclei) identified in each mask.
It assumes masks use unique positive integer labels for objects and a
specified background value (defaulting to 0). It uses the 'magick' package
for image reading and processing.
}
\examples{
\dontrun{
# Example 1: Process all files ending in "_seg.png" in a directory
# Assume "/path/to/masks" contains mask files like "image1_seg.png", "image2_seg.png"
results_dir <- countCells(path = "/path/to/masks", suffix = "_seg.png")
print(results_dir)

# Example 2: Process a specific list of files
file_list <- c("/path/to/masks/image1_seg.png", "/path/to/masks/image3_seg.png")
results_list <- countCells(files = file_list)
print(results_list)

# Example 3: Process a single file specified by path
results_single <- countCells(path = "/path/to/masks/image1_seg.png")
print(results_single)

# Example 4: Process files where background pixel value is 255
results_bg <- countCells(path = "/path/to/masks_alt_bg", suffix = ".png", background_value = 255)
print(results_bg)

# Example demonstrating NA for a non-existent or corrupt file
# Create a dummy file list including a non-existent one
# (Assuming 'real_mask.png' exists and 'fake_mask.png' does not)
mixed_files <- c("real_mask.png", "fake_mask.png")
# Need to ensure 'real_mask.png' is a valid PNG mask for a meaningful result
# results_mixed <- countCells(files = mixed_files)
# print(results_mixed) # Would show count for real_mask.png and NA for fake_mask.png
}

}
