% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/imageProcessing.R
\name{cropImages}
\alias{cropImages}
\title{'cropImages()' generates cropped images from a data frame of image paths and XY coordinates}
\usage{
cropImages(
  df,
  pixel_offset,
  output_dir,
  input_dir = NULL,
  output_prefix = "",
  create_dir = FALSE
)
}
\arguments{
\item{df}{A data frame containing image processing information. \strong{Required.}
Must include columns: \code{image_path} (character, full path to the input image
or filename relative to \code{input_dir} if provided),
\code{x_coord} (numeric, x-coordinate of the center point for cropping),
\code{y_coord} (numeric, y-coordinate of the center point for cropping),
\code{output_filename} (character, desired filename for the cropped output image).}

\item{pixel_offset}{An integer specifying the number of pixels to offset from
the center coordinates (\code{x_coord}, \code{y_coord}) in each direction (up, down,
left, right) to define the cropping box. \strong{Required.} The resulting crop
dimensions will be (2 * pixel_offset) x (2 * pixel_offset). Must be a
positive integer.}

\item{output_dir}{A character string specifying the path to the directory
where cropped images should be saved. \strong{Required.}}

\item{input_dir}{An optional character string specifying a base directory
for input images. If provided, paths in \code{df$image_path} are treated as
relative to this directory (e.g., if \code{input_dir} is "/path/to/images" and
\code{df$image_path} contains "img1.png", the function will look for
"/path/to/images/img1.png"). If \code{NULL} (the default), \code{df$image_path}
must contain full paths or paths relative to the current working directory.}

\item{output_prefix}{A character string to prepend to the output filenames
specified in the \code{df$output_filename} column. Defaults to \code{""} (an empty
string), meaning no prefix is added by default. Optional.}

\item{create_dir}{A logical value indicating whether the \code{output_dir} should
be created if it does not exist. Defaults to \code{FALSE}. If \code{TRUE}, the
function will attempt to create the directory recursively. If \code{FALSE} and
the directory does not exist, the function will stop with an error. Optional.}
}
\value{
Invisibly returns \code{NULL}. The function's primary effect is saving
cropped image files to the specified \code{output_dir}.
}
\description{
Reads images specified in a data frame, crops them based on a user-defined
offset centred on user-provided pixel coordinates, and saves the cropped images to a specified
output directory. Allows specifying a base input directory if image paths
in the data frame are relative filenames. For the intended use case, the dataframe
represents the cellenONE cell sorting output file containing cell metadata and image names,
the images are the images recorded for each sorted cell, and the XY coordinates represent
the location of the cell in the image. The function crops a square region surrounding the cell
of interest, with the size of the square determined by the pixel offset.
}
